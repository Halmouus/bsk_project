{% load accounting_filters %}

{% for entry in entries %}
{% if entry.entry_type == 'debit' %}  {# Show only debit entries to avoid duplicates #}
<tr>
    <td>{{ entry.date|date:"Y-m-d" }}</td>
    <td>{{ entry.label }}</td>
    <td>
        {% if "Payment" in entry.label %}
            <span class="badge badge-success">Paid</span>
        {% else %}
            <span class="badge badge-danger">Unpaid</span>
        {% endif %}
    </td>
    <td class="text-right text-danger">
        {{ entry.debit|format_balance }}
    </td>
    <td class="text-right text-success">
        {{ entry.credit|format_balance }}
    </td>
    <td>{{ entry.reference }}</td>
    <td>
        {% if entry.source_type == 'presentation_receipt' %}
        <button class="btn btn-sm btn-info" onclick="viewPresentation('{{ entry.source_id }}')">
            <i class="fas fa-eye"></i>
        </button>
        {% else %}
        <button class="btn btn-sm btn-info" onclick="viewReceipt('{{ entry.source_type }}', '{{ entry.source_id }}')">
            <i class="fas fa-eye"></i>
        </button>
        {% endif %}
    </td>
</tr>
{% endif %}
{% empty %}
<tr>
    <td colspan="7" class="text-center">No entries found for this period</td>
</tr>
{% endfor %}